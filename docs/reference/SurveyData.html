<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>SurveyData objects — SurveyData • mrpkit</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="SurveyData objects — SurveyData" />
<meta property="og:description" content="A SurveyData object represents a survey and its metadata. The survey itself
is a data frame containing all data from the survey. The survey data object
also includes the survey questions and responses (if left empty these will
just be the column and factor level names). To enable weighted comparisons,
survey weights and a survey design can be specified, with the survey design
specified using survey package notation." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">mrpkit</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Object and Methods</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/mrpkit_workflow.html">Getting Started</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mitzimorris/mrp-kit">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>SurveyData objects</h1>
    
    <div class="hidden name"><code>SurveyData.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>A <code>SurveyData</code> object represents a survey and its metadata. The survey itself
is a data frame containing all data from the survey. The survey data object
also includes the survey questions and responses (if left empty these will
just be the column and factor level names). To enable weighted comparisons,
survey weights and a survey design can be specified, with the survey design
specified using <span class="pkg">survey</span> package notation.</p>
    </div>



    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    
<h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Public methods</h3>

<ul>
<li><p><a href='#method-new'><code>SurveyData$new()</code></a></p></li>
<li><p><a href='#method-n_obs'><code>SurveyData$n_obs()</code></a></p></li>
<li><p><a href='#method-n_questions'><code>SurveyData$n_questions()</code></a></p></li>
<li><p><a href='#method-print'><code>SurveyData$print()</code></a></p></li>
<li><p><a href='#method-add_survey_data_column'><code>SurveyData$add_survey_data_column()</code></a></p></li>
<li><p><a href='#method-survey_data'><code>SurveyData$survey_data()</code></a></p></li>
<li><p><a href='#method-questions'><code>SurveyData$questions()</code></a></p></li>
<li><p><a href='#method-responses'><code>SurveyData$responses()</code></a></p></li>
<li><p><a href='#method-weights'><code>SurveyData$weights()</code></a></p></li>
<li><p><a href='#method-design'><code>SurveyData$design()</code></a></p></li>
<li><p><a href='#method-clone'><code>SurveyData$clone()</code></a></p></li>
</ul>
<p><hr>
<a id="method-new"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>new()</code></h3>
<p>Create a new SurveyData object using an existing data frame and other
survey information.
This method is used to create the objects for both the sample and the population data.
If a population is approximated from a large survey (like the ACS or DHS),
then the package will enable the creation of a weighted poststratification matrix.
If the population is summarized as a poststratification matrix already, then set the weights
as the size in each cell $N_j$.
If the entire individual level population data is given, then weights should
be omitted and will be automatically set to 1.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  <span class='va'>data</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  weights <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>numeric</a></span><span class='op'>(</span><span class='op'>)</span>,
  design <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>ids <span class='op'>=</span> <span class='op'>~</span><span class='fl'>1</span><span class='op'>)</span>
<span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>data</code></dt><dd><p>A data frame containing the survey data.</p></dd>

<dt><code>questions, responses</code></dt><dd><p>Named lists containing the text of the survey
questions and the allowed responses, respectively. The names must
correspond to the names of variables in <code>data</code>. See <strong>Examples</strong>. If
these aren't provided then they will be created internally using all
factor, character, and binary variables in <code>data</code>.</p></dd>

<dt><code>weights</code></dt><dd><p>Optionally, the name of a variable in <code>data</code> containing
survey weights.</p></dd>

<dt><code>design</code></dt><dd><p>Optionally, a named list of arguments (except <code>weights</code> and
<code>data</code>) to pass to <code><a href='https://rdrr.io/pkg/survey/man/svydesign.html'>survey::svydesign()</a></code> to specify the survey design.</p></dd>

</dl><p></div></p>
<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Examples</h4>
<p><div class="r example copy"></p><pre><span class='co'># Population estimated from large survey</span>
<span class='va'>popn_obj1</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>approx_voters_popn</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age_group <span class='op'>=</span> <span class='st'>"Which age group are you?"</span>,
    gender <span class='op'>=</span> <span class='st'>"Gender?"</span>
  <span class='op'>)</span>,
  <span class='co'># order doesn't matter (gender before age2 here) because</span>
  <span class='co'># the list has the names of the variables</span>
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    age_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>age_group</span><span class='op'>)</span>
  <span class='op'>)</span>,
  weights <span class='op'>=</span> <span class='st'>"wt"</span> <span class='co'># use the wt column from approx_voters_popn data</span>
<span class='op'>)</span>

<span class='co'># Population poststratification matrix already known</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
<span class='va'>popn_ps</span> <span class='op'>&lt;-</span> <span class='va'>approx_voters_popn</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>age_group</span>,<span class='va'>gender</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>N_j <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>wt</span><span class='op'>)</span><span class='op'>)</span>

<span class='va'>popn_obj2</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>popn_ps</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age_group <span class='op'>=</span> <span class='st'>"Which age group are you?"</span>,
    gender <span class='op'>=</span> <span class='st'>"Gender?"</span>
  <span class='op'>)</span>,
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>popn_ps</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    age_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>popn_ps</span><span class='op'>$</span><span class='va'>age_group</span><span class='op'>)</span>
  <span class='op'>)</span>,
  weights <span class='op'>=</span> <span class='st'>"N_j"</span><span class='co'># use N_j column from popn_ps data</span>
<span class='op'>)</span>

<span class='co'># Individual population data known:</span>
<span class='co'># Pretend that approx_voters_popn is the full population</span>
<span class='va'>popn_obj3</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>approx_voters_popn</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age_group <span class='op'>=</span> <span class='st'>"Which age group are you?"</span>,
    gender <span class='op'>=</span> <span class='st'>"Gender?"</span>
  <span class='op'>)</span>,
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    age_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>age_group</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>
<span class='va'>popn_obj1</span>
<span class='va'>popn_obj2</span>
<span class='va'>popn_obj3</span>
</pre><p></div></p>

<p><hr>
<a id="method-n_obs"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>n_obs()</code></h3>
<p>Number of observations in the survey data</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>n_obs</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-n_questions"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>n_questions()</code></h3>
<p>Number of survey questions</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>n_questions</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-print"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code><a href='https://rdrr.io/r/base/print.html'>print()</a></code></h3>
<p>Print a summary of the survey data</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>print</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>...</code></dt><dd><p>Currently ignored.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-add_survey_data_column"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>add_survey_data_column()</code></h3>
<p>Add a column to the sample data. This is primarily
intended for internal use but may occasionally be useful.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>add_survey_data_column</span><span class='op'>(</span><span class='va'>name</span>, <span class='va'>value</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>name, value</code></dt><dd><p>The name of the new variable (a string) and the
vector of values to add to the data frame.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-survey_data"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>survey_data()</code></h3>
<p>Access the data frame containing the sample data.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>survey_data</span><span class='op'>(</span>key <span class='op'>=</span> <span class='cn'>TRUE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>key</code></dt><dd><p>Should the <code>.key</code> column be included? This column just
indicates the original order of the rows and is primarily intended
for internal use.</p></dd>

</dl><p></div></p>
<p><hr>
<a id="method-questions"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>questions()</code></h3>
<p>Access the list of survey questions</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>questions</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-responses"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>responses()</code></h3>
<p>Access the list of allowed survey responses</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>responses</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-weights"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code><a href='https://rdrr.io/r/stats/weights.html'>weights()</a></code></h3>
<p>Access the survey weights</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>weights</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-design"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>design()</code></h3>
<p>Access the survey design</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>design</span><span class='op'>(</span><span class='op'>)</span></pre><p></div></p>

<p><hr>
<a id="method-clone"></a></p><h3 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Method <code>clone()</code></h3>
<p>The objects of this class are cloneable with this method.</p><h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Usage</h4>
<p><div class="r"></p><pre><span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>clone</span><span class='op'>(</span>deep <span class='op'>=</span> <span class='cn'>FALSE</span><span class='op'>)</span></pre><p></div></p>

<h4 class='hasAnchor' id='arguments'><a class='anchor' href='#arguments'></a>Arguments</h4>
<p><div class="arguments"></p><dl>
<dt><code>deep</code></dt><dd><p>Whether to make a deep clone.</p></dd>

</dl><p></div></p>



    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>shape_survey</span><span class='op'>)</span>
</div><div class='output co'>#&gt;     age gender     vote_for   highest_educ   state   y        wt
#&gt; 1 56-65   male           BP   some college State D  no  79.90290
#&gt; 2 46-55   male Circle Party 4-year college State B yes  89.12213
#&gt; 3 36-45   male Circle Party     associates State D  no  92.90569
#&gt; 4 18-25   male    Box Party    high school State B yes  80.78384
#&gt; 5 56-65 female           BP    high school State A yes  89.85756
#&gt; 6 56-65 female Circle Party 4-year college State B yes 117.04200</div><div class='input'><span class='va'>box_prefs</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>shape_survey</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age <span class='op'>=</span> <span class='st'>"Please identify your age group"</span>,
    gender <span class='op'>=</span> <span class='st'>"Please select your gender"</span>,
    vote_for <span class='op'>=</span> <span class='st'>"Which party did you vote for in the 2018 election?"</span>,
    y <span class='op'>=</span> <span class='st'>"If today is the election day, would you vote for the Box Party?"</span>
  <span class='op'>)</span>,
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>shape_survey</span><span class='op'>$</span><span class='va'>age</span><span class='op'>)</span>,
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>shape_survey</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    vote_for <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>shape_survey</span><span class='op'>$</span><span class='va'>vote_for</span><span class='op'>)</span>,
    y <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='st'>"no"</span>,<span class='st'>"yes"</span><span class='op'>)</span>
  <span class='op'>)</span>,
  weights <span class='op'>=</span> <span class='st'>"wt"</span>,
  design <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>ids <span class='op'>=</span><span class='op'>~</span><span class='fl'>1</span><span class='op'>)</span>
<span class='op'>)</span>
<span class='va'>box_prefs</span><span class='op'>$</span><span class='fu'>print</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Survey with 500 observations, 4 questions 
#&gt; Independent Sampling design (with replacement) 
#&gt; 
#&gt; Column label: age 
#&gt; Question: Please identify your age group 
#&gt; Allowed answers: 18-25, 26-35, 36-45, 46-55, 56-65, 66-75, 76-90 
#&gt; 
#&gt; Column label: gender 
#&gt; Question: Please select your gender 
#&gt; Allowed answers: male, female, nonbinary 
#&gt; 
#&gt; Column label: vote_for 
#&gt; Question: Which party did you vote for in the 2018 election? 
#&gt; Allowed answers: Box Party, BP, Circle Party, CP 
#&gt; 
#&gt; Column label: y 
#&gt; Question: If today is the election day, would you vote for the Box Party? 
#&gt; Allowed answers: no, yes </div><div class='input'><span class='va'>box_prefs</span><span class='op'>$</span><span class='fu'>n_questions</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; [1] 4</div><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   age_group gender vote_pref        wt       education state
#&gt; 1       66+      m        BP  6.007461 4-years college     A
#&gt; 2     56-65      f        CP  8.465851     high school     A
#&gt; 3     56-65      m        CP  4.098878 4-years college     C
#&gt; 4       66+      m        BP  3.883250 4-years college     C
#&gt; 5       66+      f        CP 16.179562    some college     B
#&gt; 6     18-35      m        BP  3.851837     high school     D</div><div class='input'><span class='va'>popn_obj</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>approx_voters_popn</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age_group <span class='op'>=</span> <span class='st'>"Which age group are you?"</span>,
    gender <span class='op'>=</span> <span class='st'>"Gender?"</span>,
    vote_pref <span class='op'>=</span> <span class='st'>"Which party do you prefer to vote for?"</span>
  <span class='op'>)</span>,
  <span class='co'># order doesn't matter (gender before age2 here) because</span>
  <span class='co'># the list has the names of the variables</span>
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    age_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>age_group</span><span class='op'>)</span>,
    vote_pref <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>vote_pref</span><span class='op'>)</span>
  <span class='op'>)</span>,
  weights <span class='op'>=</span> <span class='st'>"wt"</span>
<span class='op'>)</span>
<span class='va'>popn_obj</span><span class='op'>$</span><span class='fu'>print</span><span class='op'>(</span><span class='op'>)</span>
</div><div class='output co'>#&gt; Survey with 5000 observations, 3 questions 
#&gt; Independent Sampling design (with replacement) 
#&gt; 
#&gt; Column label: age_group 
#&gt; Question: Which age group are you? 
#&gt; Allowed answers: 18-35, 36-55, 56-65, 66+ 
#&gt; 
#&gt; Column label: gender 
#&gt; Question: Gender? 
#&gt; Allowed answers: m, f, nb 
#&gt; 
#&gt; Column label: vote_pref 
#&gt; Question: Which party do you prefer to vote for? 
#&gt; Allowed answers: BP, CP </div><div class='input'>

<span class='co'>## ------------------------------------------------</span>
<span class='co'>## Method `SurveyData$new`</span>
<span class='co'>## ------------------------------------------------</span>

<span class='co'># Population estimated from large survey</span>
<span class='va'>popn_obj1</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>approx_voters_popn</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age_group <span class='op'>=</span> <span class='st'>"Which age group are you?"</span>,
    gender <span class='op'>=</span> <span class='st'>"Gender?"</span>
  <span class='op'>)</span>,
  <span class='co'># order doesn't matter (gender before age2 here) because</span>
  <span class='co'># the list has the names of the variables</span>
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    age_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>age_group</span><span class='op'>)</span>
  <span class='op'>)</span>,
  weights <span class='op'>=</span> <span class='st'>"wt"</span> <span class='co'># use the wt column from approx_voters_popn data</span>
<span class='op'>)</span>

<span class='co'># Population poststratification matrix already known</span>
<span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://dplyr.tidyverse.org'>dplyr</a></span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: ‘dplyr’</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:stats’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    filter, lag</span></div><div class='output co'>#&gt; <span class='message'>The following objects are masked from ‘package:base’:</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    intersect, setdiff, setequal, union</span></div><div class='input'><span class='va'>popn_ps</span> <span class='op'>&lt;-</span> <span class='va'>approx_voters_popn</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span><span class='op'>(</span><span class='va'>age_group</span>,<span class='va'>gender</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'><a href='https://dplyr.tidyverse.org/reference/summarise.html'>summarise</a></span><span class='op'>(</span>N_j <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/sum.html'>sum</a></span><span class='op'>(</span><span class='va'>wt</span><span class='op'>)</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>`summarise()` has grouped output by 'age_group'. You can override using the `.groups` argument.</span></div><div class='input'>
<span class='va'>popn_obj2</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>popn_ps</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age_group <span class='op'>=</span> <span class='st'>"Which age group are you?"</span>,
    gender <span class='op'>=</span> <span class='st'>"Gender?"</span>
  <span class='op'>)</span>,
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>popn_ps</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    age_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>popn_ps</span><span class='op'>$</span><span class='va'>age_group</span><span class='op'>)</span>
  <span class='op'>)</span>,
  weights <span class='op'>=</span> <span class='st'>"N_j"</span><span class='co'># use N_j column from popn_ps data</span>
<span class='op'>)</span>

<span class='co'># Individual population data known:</span>
<span class='co'># Pretend that approx_voters_popn is the full population</span>
<span class='va'>popn_obj3</span> <span class='op'>&lt;-</span> <span class='va'>SurveyData</span><span class='op'>$</span><span class='fu'>new</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='va'>approx_voters_popn</span>,
  questions <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    age_group <span class='op'>=</span> <span class='st'>"Which age group are you?"</span>,
    gender <span class='op'>=</span> <span class='st'>"Gender?"</span>
  <span class='op'>)</span>,
  responses <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span>
    gender <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>gender</span><span class='op'>)</span>,
    age_group <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/levels.html'>levels</a></span><span class='op'>(</span><span class='va'>approx_voters_popn</span><span class='op'>$</span><span class='va'>age_group</span><span class='op'>)</span>
  <span class='op'>)</span>
<span class='op'>)</span>
<span class='va'>popn_obj1</span>
</div><div class='output co'>#&gt; Survey with 5000 observations, 2 questions 
#&gt; Independent Sampling design (with replacement) 
#&gt; 
#&gt; Column label: age_group 
#&gt; Question: Which age group are you? 
#&gt; Allowed answers: 18-35, 36-55, 56-65, 66+ 
#&gt; 
#&gt; Column label: gender 
#&gt; Question: Gender? 
#&gt; Allowed answers: m, f, nb </div><div class='input'><span class='va'>popn_obj2</span>
</div><div class='output co'>#&gt; Survey with 12 observations, 2 questions 
#&gt; Independent Sampling design (with replacement) 
#&gt; 
#&gt; Column label: age_group 
#&gt; Question: Which age group are you? 
#&gt; Allowed answers: 18-35, 36-55, 56-65, 66+ 
#&gt; 
#&gt; Column label: gender 
#&gt; Question: Gender? 
#&gt; Allowed answers: m, f, nb </div><div class='input'><span class='va'>popn_obj3</span>
</div><div class='output co'>#&gt; Survey with 5000 observations, 2 questions 
#&gt; Independent Sampling design (with replacement) 
#&gt; 
#&gt; Column label: age_group 
#&gt; Question: Which age group are you? 
#&gt; Allowed answers: 18-35, 36-55, 56-65, 66+ 
#&gt; 
#&gt; Column label: gender 
#&gt; Question: Gender? 
#&gt; Allowed answers: m, f, nb </div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Lauren Kennedy, Jonah Gabry, Mitzi Morris, Dewi Amaliah, Rohan Alexander.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


